# ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ - Student Room Booking System

## ุงูุฅุนุฏุงุฏ ุงูุฃููู

### 1. ุชุฃูุฏ ูู ูุฌูุฏ ุณูู ูุบุฑู ูู ุงููุธุงู

#### ููุณุคูู (Admin):

**ุฃ. ุฅูุดุงุก ุณูู ุฌุฏูุฏ (ุฅุฐุง ูู ููู ููุฌูุฏุงู)**
1. ุงูุชูู ุฅูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุงูู
2. ุงุถุบุท "ุฅุถุงูุฉ ุณูู ุฌุฏูุฏ"
3. ุงููุฃ ุงูุจูุงูุงุช:
   - ุงูุงุณู: "ุงูุณูู ุงูุฌุงูุนู A"
   - ุงููุตู: "ุณูู ุญุฏูุซ ููุทูุงุจ"
   - ุงูุญุฏ ุงูุฃูุตู ููุบุฑู: `10`
   - ุงูุณุนุฉ ุงููููุฉ: `0` (ุณูุชู ุญุณุงุจูุง ุชููุงุฆูุงู)
4. ุงุญูุธ ุงูุณูู

**ุจ. ุฅุถุงูุฉ ุบุฑู ูุน ุฃุณุนุงุฑ ูุญุฏุฏุฉ**
1. ุงูุชุญ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุบุฑู ููุณูู
2. ุงุถุบุท "ุฅุถุงูุฉ ุบุฑูุฉ ุฌุฏูุฏุฉ"
3. ุงููุฃ ุงูุจูุงูุงุช:
   - ุฑูู ุงูุบุฑูุฉ: "101"
   - ุงูุทุงุจู: 1
   - ุงูููุน: "ูุฒุฏูุฌุฉ"
   - ุนุฏุฏ ุงูุฃุณุฑุฉ: 2
   - **ุงูุณุนุฑ ุงูุดูุฑู: `500`** โ ููู ุฌุฏุงู!
   - **ุงูุนููุฉ: `LYD`** โ ููู ุฌุฏุงู!
   - ุงููุฑุงูู: (ุงุฎุชุฑ ุญุณุจ ุงูุฑุบุจุฉ)
4. ุงุญูุธ ุงูุบุฑูุฉ
5. ูุฑุฑ ุงูุฎุทูุงุช ูุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุบุฑู

**โ๏ธ ููุงุญุธุฉ ูููุฉ**: ุฅุฐุง ูู ุชุญุฏุฏ ุงูุณุนุฑุ ุงูุบุฑูุฉ **ูู ุชุธูุฑ** ููุทูุงุจ!

## ุงูุงุฎุชุจุงุฑ ูุทุงูุจ

### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู ูุทุงูุจ
1. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ ุทุงูุจ
2. ุงูุชูู ุฅูู `/student/room`

### ุงูุฎุทูุฉ 2: ุนุฑุถ ุงููุณุงูู
**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ูุงุฆูุฉ ุจุฌููุน ุงููุณุงูู ุงููุชุงุญุฉ
- โ ููู ุณูู:
  - ุงูุงุณู ูุงููุตู
  - ุตูุฑุฉ (ุฃู ุฃููููุฉ ุงูุชุฑุงุถูุฉ)
  - **ุนุฏุฏ ุงูุบุฑู ุงูุญุงููุฉ / ุงูุนุฏุฏ ุงูุฃูุตู** (ูุซู: `3/10`)
  - **ุนุฏุฏ ุงูููุงุนุฏ ุงููุชุงุญุฉ / ุงูุฅุฌูุงูู** (ูุซู: `5/10 ููุนุฏ ูุชุงุญ`)
  - **ุดุฑูุท ูุณุจุฉ ุงูุฅุดุบุงู** (ูููู ุญุณุจ ุงููุณุจุฉ)
  - ุญุงูุฉ: "ูุชุงุญ" ุฃู "ููุชูุฆ"
  - ุฒุฑ "ุนุฑุถ ุงูุบุฑู ุงููุชุงุญุฉ"

**ุงุฎุชุจุงุฑ ูุณุจุฉ ุงูุฅุดุบุงู:**
```
ูุซุงู: ุณูู ุจู 5 ุบุฑู ูู ุฃุตู 10
      ูู ุบุฑูุฉ ุจูุง 2 ุณุฑูุฑ
      ุงูุณุนุฉ ุงููููุฉ = 10 ุฃุณุฑุฉ
      ูุญุฌูุฒ = 3 ุฃุณุฑุฉ
      ูุชุงุญ = 7 ุฃุณุฑุฉ
      ูุณุจุฉ ุงูุฅุดุบุงู = 30%
```

### ุงูุฎุทูุฉ 3: ุนุฑุถ ุงูุบุฑู ุงูุดุงุบุฑุฉ
1. ุงุถุบุท ุนูู "ุนุฑุถ ุงูุบุฑู ุงููุชุงุญุฉ" ูุณูู ูุนูู
2. ููุจุซู ูุฑุจุน ุญูุงุฑ

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ูุงุฆูุฉ ุจุงูุบุฑู ุงูุดุงุบุฑุฉ ููุท
- โ ูู ุบุฑูุฉ ุชุนุฑุถ:
  - ุฑูู ุงูุบุฑูุฉ
  - ุงูุทุงุจู
  - ุงูููุน
  - ุนุฏุฏ ุงูุฃุณุฑุฉ ุงููุชุงุญุฉ / ุงูุฅุฌูุงูู
  - **ุงูุณุนุฑ ุงูุดูุฑู** (ูุฌุจ ุฃู ูุธูุฑ!)
  - ุญุงูุฉ ุงูุบุฑูุฉ
  - ุฒุฑ "ุงุญุฌุฒ ุงูุขู"

**โ๏ธ ุงุฎุชุจุงุฑ ููู:**
- ุงูุบุฑู **ุจุฏูู ุณุนุฑ ูุญุฏุฏ** ูุฌุจ ุฃู **ูุง ุชุธูุฑ** ูู ุงููุงุฆูุฉ
- ุฅุฐุง ุธูุฑุช ุบุฑูุฉ ุจุฏูู ุณุนุฑุ ุณุชุฑู ุชูุจูู "ูู ูุชู ุชุญุฏูุฏ ุงูุณุนุฑ"

### ุงูุฎุทูุฉ 4: ุงุฎุชูุงุฑ ุบุฑูุฉ ููุญุฌุฒ
1. ุงุถุบุท ุนูู "ุงุญุฌุฒ ุงูุขู" ูุบุฑูุฉ ูุนููุฉ
2. ููุจุซู ูุฑุจุน ุญูุงุฑ ุชุฃููุฏ ุงูุญุฌุฒ

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ุชูุงุตูู ุงูุบุฑูุฉ:
  - ุงูุณูู
  - ุฑูู ุงูุบุฑูุฉ
  - ุงูุทุงุจู
  - ุงูููุน

### ุงูุฎุทูุฉ 5: ุงุฎุชูุงุฑ ูุชุฑุฉ ุงูุญุฌุฒ
1. ุงุฎุชุฑ **ุชุงุฑูุฎ ุงูุจุฏุงูุฉ** (ุงูููู ุฃู ุจุนุฏ ุฐูู)
2. ุงุฎุชุฑ **ุชุงุฑูุฎ ุงูููุงูุฉ** (ูุฌุจ ุฃู ูููู ุจุนุฏ ุงูุจุฏุงูุฉ)

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ุงููุฏุฉ ุงููุญุณูุจุฉ ุจุงูุฃุดูุฑ (ุชููุงุฆูุงู)
- โ **ุฅุฌูุงูู ุงูุชูููุฉ** = ุงูุณุนุฑ ุงูุดูุฑู ร ุนุฏุฏ ุงูุฃุดูุฑ
  ```
  ูุซุงู: ุณุนุฑ ุงูุบุฑูุฉ = 500 LYD
         ุงููุฏุฉ = 3 ุฃุดูุฑ
         ุงูุฅุฌูุงูู = 1500 LYD
  ```

### ุงูุฎุทูุฉ 6: ุงููุชุงุจุนุฉ ููุฏูุน
1. ุงุถุบุท ุนูู "ุงููุชุงุจุนุฉ ููุฏูุน"

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ูููุฐุฌ ุงูุฏูุน ุงููููู:
  - ุญูู ุฑูู ุงูุจุทุงูุฉ (16 ุฑูู)
  - ุญูู ุชุงุฑูุฎ ุงูุงูุชูุงุก (MM/YY)
  - ุญูู CVV (3 ุฃุฑูุงู)
  - ุชูุจูู "ูุฐุง ูุธุงู ุฏูุน ูููู ููุงุฎุชุจุงุฑ ููุท"

### ุงูุฎุทูุฉ 7: ุฅุฏุฎุงู ุจูุงูุงุช ุงูุฏูุน ุงูููููุฉ
ุฃุฏุฎู ุฃู ุจูุงูุงุช (ุงููุธุงู ูููู):
- ุฑูู ุงูุจุทุงูุฉ: `1234 5678 9012 3456`
- ุชุงุฑูุฎ ุงูุงูุชูุงุก: `12/25`
- CVV: `123`

### ุงูุฎุทูุฉ 8: ุชุฃููุฏ ุงูุญุฌุฒ ูุงูุฏูุน
1. ุงุถุบุท ุนูู "ุชุฃููุฏ ุงูุญุฌุฒ ูุงูุฏูุน"

**ูุง ูุฌุจ ุฃู ูุญุฏุซ:**
- โ ูุธูุฑ ูุคุดุฑ "ุฌุงุฑู ูุนุงูุฌุฉ ุงูุญุฌุฒ..."
- โ ุจุนุฏ ุซูุงููุ ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ:
  - "ุชู ุงูุญุฌุฒ ุจูุฌุงุญ! ๐"
  - **ุฑูู ุงูุญุฌุฒ**: `guid`
  - **ุฑูู ุงูุฏูุน**: `guid`
  - ุฒุฑ "ุฅุบูุงู"

### ุงูุฎุทูุฉ 9: ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช
1. ุฃุบูู ูุฑุจุน ุงูุญูุงุฑ
2. ุงุฑุฌุน ุฅูู ูุงุฆูุฉ ุงููุณุงูู

**ูุง ูุฌุจ ุฃู ุชูุงุญุธู:**
- โ **ุงูููุงุนุฏ ุงููุชุงุญุฉ ููุตุช ุจููุฏุงุฑ 1**
  - ูุซูุงู: ูุงูุช `10/20` ุฃุตุจุญุช `9/20`
- โ **ูุณุจุฉ ุงูุฅุดุบุงู ุฒุงุฏุช**
  - ูุซูุงู: ูุงูุช `50%` ุฃุตุจุญุช `55%`

## ุงุฎุชุจุงุฑ ุณููุงุฑูููุงุช ุงูุฎุทุฃ

### ุงูุณููุงุฑูู 1: ุญุฌุฒ ุจุฏูู ุงุฎุชูุงุฑ ุชูุงุฑูุฎ
1. ุงุฎุชุฑ ุบุฑูุฉ
2. ูุง ุชุฎุชุฑ ุงูุชูุงุฑูุฎ
3. ุงุถุบุท "ุงููุชุงุจุนุฉ ููุฏูุน"

**ุงููุชููุน:** โ ุงูุฒุฑ ูุนุทู

### ุงูุณููุงุฑูู 2: ุชุงุฑูุฎ ุงูููุงูุฉ ูุจู ุงูุจุฏุงูุฉ
1. ุงุฎุชุฑ ุชุงุฑูุฎ ุจุฏุงูุฉ: `2024-01-10`
2. ุงุฎุชุฑ ุชุงุฑูุฎ ููุงูุฉ: `2024-01-05`
3. ุงุถุบุท "ุงููุชุงุจุนุฉ ููุฏูุน"

**ุงููุชููุน:** โ ุฑุณุงูุฉ ุฎุทุฃ "ุชุงุฑูุฎ ุงูููุงูุฉ ูุฌุจ ุฃู ูููู ุจุนุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ"

### ุงูุณููุงุฑูู 3: ูุญุงููุฉ ุงูุญุฌุฒ ูุบุฑูุฉ ููุชูุฆุฉ
1. ุงุญุฌุฒ ุฌููุน ุงูุฃุณุฑุฉ ูู ุบุฑูุฉ
2. ุญุงูู ุงูุญุฌุฒ ูุฑุฉ ุฃุฎุฑู

**ุงููุชููุน:** โ ุงูุบุฑูุฉ ูุง ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุบุฑู ุงูุดุงุบุฑุฉ

## ุงุฎุชุจุงุฑ ูุณุจุฉ ุงูุฅุดุบุงู

### ุงุฎุชุจุงุฑ 1: ุฅุถุงูุฉ ุบุฑูุฉ ุฌุฏูุฏุฉ
**ูุจู:**
```
ุณูู A: 5/10 ุบุฑู
```

**ุงูุฅุฌุฑุงุก:** ุฃุถู ุบุฑูุฉ ุฌุฏูุฏุฉ (ุจูุง 2 ุณุฑูุฑ)

**ุจุนุฏ:**
```
ุณูู A: 6/10 ุบุฑู
ุงูุณุนุฉ ุงููููุฉ: +2
ุงูุณุนุฉ ุงููุชุงุญุฉ: +2
```

### ุงุฎุชุจุงุฑ 2: ุญุฐู ุบุฑูุฉ
**ูุจู:**
```
ุณูู A: 6/10 ุบุฑู
```

**ุงูุฅุฌุฑุงุก:** ุงุญุฐู ุบุฑูุฉ ูุงุฑุบุฉ (ุจูุง 2 ุณุฑูุฑ)

**ุจุนุฏ:**
```
ุณูู A: 5/10 ุบุฑู
ุงูุณุนุฉ ุงููููุฉ: -2
ุงูุณุนุฉ ุงููุชุงุญุฉ: -2
```

### ุงุฎุชุจุงุฑ 3: ุญุฌุฒ ุบุฑูุฉ
**ูุจู:**
```
ุณูู A: 10 ููุงุนุฏ ูุชุงุญุฉ / 20 ุฅุฌูุงูู (50%)
ุบุฑูุฉ 101: 0/2 ูุญุฌูุฒ
```

**ุงูุฅุฌุฑุงุก:** ุงุญุฌุฒ ุณุฑูุฑ ูู ุงูุบุฑูุฉ 101

**ุจุนุฏ:**
```
ุณูู A: 9 ููุงุนุฏ ูุชุงุญุฉ / 20 ุฅุฌูุงูู (55%)
ุบุฑูุฉ 101: 1/2 ูุญุฌูุฒ
```

## ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุจุนุฏ ูู ุญุฌุฒุ ุชุญูู ูู:

### ุฌุฏูู Residences:
```sql
SELECT 
    Name,
    CurrentRoomsCount,
    MaxRoomsCount,
    TotalCapacity,
    AvailableCapacity
FROM Residences
```

**ูุฌุจ ุฃู:**
- โ `AvailableCapacity` ุชููุต ุจููุฏุงุฑ 1 ุจุนุฏ ูู ุญุฌุฒ
- โ `CurrentRoomsCount` ุชุฒูุฏ ุจููุฏุงุฑ 1 ุจุนุฏ ุฅุถุงูุฉ ุบุฑูุฉ

### ุฌุฏูู Rooms:
```sql
SELECT 
    RoomNumber,
    TotalBeds,
    OccupiedBeds,
    MonthlyRent_Amount,
    MonthlyRent_Currency,
    Status
FROM Rooms
```

**ูุฌุจ ุฃู:**
- โ `OccupiedBeds` ุชุฒูุฏ ุจููุฏุงุฑ 1 ุจุนุฏ ูู ุญุฌุฒ
- โ `MonthlyRent_Amount` ู `MonthlyRent_Currency` **ููุณุง NULL**

### ุฌุฏูู Reservations:
```sql
SELECT 
    StudentId,
    RoomId,
    ResidenceId,
    StartDate,
    EndDate,
    TotalAmount_Amount,
    TotalAmount_Currency,
    IsPaid,
    Status
FROM Reservations
```

**ูุฌุจ ุฃู:**
- โ ููุฌุฏ ุณุฌู ุฌุฏูุฏ ููู ุญุฌุฒ
- โ `IsPaid = true`
- โ `Status = Confirmed`
- โ `TotalAmount_Amount` = ุงูุณุนุฑ ุงูุดูุฑู ร ุนุฏุฏ ุงูุฃุดูุฑ

### ุฌุฏูู Payments:
```sql
SELECT 
    ReservationId,
    Amount_Amount,
    Amount_Currency,
    Status,
    PaymentMethod,
    TransactionId
FROM Payments
```

**ูุฌุจ ุฃู:**
- โ ููุฌุฏ ุณุฌู ุฏูุน ููู ุญุฌุฒ
- โ `Status = Paid`
- โ `PaymentMethod = "Dummy Gateway"`
- โ `TransactionId` ููุณ NULL

## ุงูุฃุฎุทุงุก ุงููุญุชููุฉ ูุญููููุง

### ุฎุทุฃ: "ุงูุบุฑู ูุง ุชุธูุฑ ููุทูุงุจ"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ุงูุบุฑูุฉ ููุง `MonthlyRent` ูุญุฏุฏ
2. ุชุฃูุฏ ูู ุฃู `Status = Available`
3. ุชุฃูุฏ ูู ุฃู `OccupiedBeds < TotalBeds`

### ุฎุทุฃ: "ูุณุจุฉ ุงูุฅุดุบุงู ูุง ุชุชุญุฏุซ"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชูููุฐ `SaveChangesAsync()` ุจุนุฏ ุงูุชุญุฏูุซุงุช
2. ุชุญูู ูู `ReservationService.cs` ุงูุณุทุฑ 209-216
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

### ุฎุทุฃ: "Null reference exception ูู MonthlyRent"
**ุงูุญู:**
1. ุชุฃูุฏ ูู Mapper configuration ูู `MapsterConfiguration.cs`
2. ุชุฃูุฏ ูู ุชุญุฏูุฏ ุงูุณุนุฑ ูู `CreateRoomCommandHandler.cs`
3. ุฃุนุฏ ุจูุงุก ุงููุดุฑูุน

### ุฎุทุฃ: "ูุดู ุงูุฏูุน"
**ุงูุญู:**
1. ุชุญูู ูู `DummyPaymentService.cs`
2. ุชุฃูุฏ ูู ุฃู `PaymentRequestDto` ูุญุชูู ุนูู `Amount` ู `Currency`
3. ุฑุงุฌุน ุณุฌูุงุช ุงูุฎุทุฃ

### ุฎุทุฃ: "InvalidOperationException: Cannot provide a value for property 'Http'"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุณุฌูู `HttpClient` ูู `Program.cs`.
2. ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงูุณุทุฑ: `builder.Services.AddScoped(sp => new HttpClient { BaseAddress = new Uri("https://localhost:7117") });`

## ุชูุฑูุฑ ุงูุงุฎุชุจุงุฑ

- [ ] ุนุฑุถ ุงููุณุงูู ูุน ูุณุจุฉ ุงูุฅุดุบุงู
- [ ] ุนุฑุถ ุงูุนุฏุฏ ุงูุญุงูู/ุงูุฃูุตู ููุบุฑู (X/Y)
- [ ] ุดุฑูุท ุงูุชูุฏู ูุนูู ุจุดูู ุตุญูุญ
- [ ] ูุฑุจุน ุญูุงุฑ ุงูุบุฑู ุงูุดุงุบุฑุฉ ูุนูู
- [ ] ุงูุบุฑู ุจุฏูู ุณุนุฑ ูุง ุชุธูุฑ
- [ ] ุงุฎุชูุงุฑ ูุชุฑุฉ ุงูุญุฌุฒ ูุนูู
- [ ] ุญุณุงุจ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ ุตุญูุญ
- [ ] ูููุฐุฌ ุงูุฏูุน ุงููููู ูุนูู
- [ ] ุฅุชูุงู ุงูุญุฌุฒ ุจูุฌุงุญ
- [ ] ุชุญุฏูุซ ุงูููุงุนุฏ ุงููุชุงุญุฉ ุจุนุฏ ุงูุญุฌุฒ
- [ ] ุชุญุฏูุซ ูุณุจุฉ ุงูุฅุดุบุงู ุจุนุฏ ุงูุญุฌุฒ
- [ ] ุชุญุฏูุซ ุนุฏุฏ ุงูุบุฑู ุนูุฏ ุงูุฅุถุงูุฉ
- [ ] ุชุญุฏูุซ ุงูุณุนุฉ ุนูุฏ ุฅุถุงูุฉ ุงูุบุฑู
- [ ] ุฑุณุงุฆู ุงูุฎุทุฃ ุชุธูุฑ ุจุดูู ุตุญูุญ

---
โ **ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุชุ ุฑุงุฆุน! ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**
