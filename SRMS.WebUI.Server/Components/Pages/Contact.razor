@page "/contact"
@* @attribute [Authorize] *@
@inject ISnackbar Snackbar
@rendermode InteractiveServer

<PageTitle>Contact Us - SRMS</PageTitle>

<MudStack Class="animate-fade-in w-full">
    <!-- Header -->
    <MudStack AlignItems="AlignItems.Center" Class="mb-6 glass-card">
        <MudText Typo="Typo.h3" Class="text-gradient mb-2 font-extrabold text-center">
            Get In Touch
        </MudText>
        <MudText Typo="Typo.h6" Color="Color.Secondary">
            We'd love to hear from you. Send us a message and we'll respond as soon as possible.
        </MudText>
    </MudStack>

    <MudGrid>
        <!-- Contact Form -->
        <MudItem xs="12" md="8">
            <MudPaper Class="glass-card pa-6">
                <MudText Typo="Typo.h5" Class="mb-4 font-bold">
                    <MudIcon Icon="@Icons.Material.Filled.Email" Class="mr-2" />
                    Send Us a Message
                </MudText>

                <EditForm Model="@_contactModel" OnValidSubmit="SubmitForm">
                    <DataAnnotationsValidator />

                    <MudGrid>
                        <MudItem xs="12" sm="6">
                            <MudTextField @bind-Value="_contactModel.FirstName" Label="First Name"
                                Variant="Variant.Outlined" Required="true" For="@(() => _contactModel.FirstName)" />
                        </MudItem>
                        <MudItem xs="12" sm="6">
                            <MudTextField @bind-Value="_contactModel.LastName" Label="Last Name"
                                Variant="Variant.Outlined" Required="true" For="@(() => _contactModel.LastName)" />
                        </MudItem>
                        <MudItem xs="12" sm="6">
                            <MudTextField @bind-Value="_contactModel.Email" Label="Email Address"
                                Variant="Variant.Outlined" InputType="InputType.Email" Required="true"
                                For="@(() => _contactModel.Email)" />
                        </MudItem>
                        <MudItem xs="12" sm="6">
                            <MudTextField @bind-Value="_contactModel.Phone" Label="Phone Number"
                                Variant="Variant.Outlined" For="@(() => _contactModel.Phone)" />
                        </MudItem>
                        <MudItem xs="12">
                            <MudSelect @bind-Value="_contactModel.Subject" Label="Subject" Variant="Variant.Outlined"
                                Required="true">
                                <MudSelectItem Value="@("General Inquiry")">General Inquiry</MudSelectItem>
                                <MudSelectItem Value="@("Technical Support")">Technical Support</MudSelectItem>
                                <MudSelectItem Value="@("Billing Question")">Billing Question</MudSelectItem>
                                <MudSelectItem Value="@("Feature Request")">Feature Request</MudSelectItem>
                                <MudSelectItem Value="@("Bug Report")">Bug Report</MudSelectItem>
                                <MudSelectItem Value="@("Partnership")">Partnership</MudSelectItem>
                                <MudSelectItem Value="@("Other")">Other</MudSelectItem>
                            </MudSelect>
                        </MudItem>
                        <MudItem xs="12">
                            <MudTextField @bind-Value="_contactModel.Message" Label="Message" Variant="Variant.Outlined"
                                Lines="6" Required="true" For="@(() => _contactModel.Message)" />
                        </MudItem>
                        <MudItem xs="12">
                            <MudCheckBox T="bool" @bind-Checked="_contactModel.AgreeToTerms" Color="Color.Primary">
                                I agree to the <MudLink Href="/terms">Terms of Service</MudLink> and <MudLink
                                    Href="/privacy">Privacy Policy</MudLink>
                            </MudCheckBox>
                        </MudItem>
                        <MudItem xs="12" Class="flex justify-end gap-3">
                            <MudButton Variant="Variant.Outlined" Color="Color.Default" OnClick="ResetForm">
                                Reset
                            </MudButton>
                            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary"
                                StartIcon="@Icons.Material.Filled.Send" Class="btn-modern btn-primary">
                                Send Message
                            </MudButton>
                        </MudItem>
                    </MudGrid>
                </EditForm>
            </MudPaper>
        </MudItem>

        <!-- Contact Information -->
        <MudItem xs="12" md="4">
            <MudStack Spacing="4">
                <!-- Contact Details -->
                <MudPaper Class="glass-card pa-5">
                    <MudText Typo="Typo.h6" Class="mb-4 font-bold">
                        <MudIcon Icon="@Icons.Material.Filled.Info" Class="mr-2" />
                        Contact Information
                    </MudText>

                    <MudStack Spacing="3">
                        <MudStack Row="true" AlignItems="AlignItems.Start">
                            <MudIcon Icon="@Icons.Material.Filled.LocationOn" Color="Color.Primary" Class="mr-3 mt-1" />
                            <MudStack Spacing="0">
                                <MudText Typo="Typo.body2" Class="font-semibold">Address</MudText>
                                <MudText Typo="Typo.body2" Color="Color.Secondary">
                                    123 University Avenue<br />
                                    City, State 12345<br />
                                    Country
                                </MudText>
                            </MudStack>
                        </MudStack>

                        <MudDivider />

                        <MudStack Row="true" AlignItems="AlignItems.Start">
                            <MudIcon Icon="@Icons.Material.Filled.Phone" Color="Color.Success" Class="mr-3 mt-1" />
                            <MudStack Spacing="0">
                                <MudText Typo="Typo.body2" Class="font-semibold">Phone</MudText>
                                <MudText Typo="Typo.body2" Color="Color.Secondary">
                                    +1 (555) 123-4567<br />
                                    +1 (555) 987-6543
                                </MudText>
                            </MudStack>
                        </MudStack>

                        <MudDivider />

                        <MudStack Row="true" AlignItems="AlignItems.Start">
                            <MudIcon Icon="@Icons.Material.Filled.Email" Color="Color.Info" Class="mr-3 mt-1" />
                            <MudStack Spacing="0">
                                <MudText Typo="Typo.body2" Class="font-semibold">Email</MudText>
                                <MudText Typo="Typo.body2" Color="Color.Secondary">
                                    info@srms.com<br />
                                    support@srms.com
                                </MudText>
                            </MudStack>
                        </MudStack>

                        <MudDivider />

                        <MudStack Row="true" AlignItems="AlignItems.Start">
                            <MudIcon Icon="@Icons.Material.Filled.Schedule" Color="Color.Warning" Class="mr-3 mt-1" />
                            <MudStack Spacing="0">
                                <MudText Typo="Typo.body2" Class="font-semibold">Business Hours</MudText>
                                <MudText Typo="Typo.body2" Color="Color.Secondary">
                                    Monday - Friday: 9:00 AM - 6:00 PM<br />
                                    Saturday: 10:00 AM - 4:00 PM<br />
                                    Sunday: Closed
                                </MudText>
                            </MudStack>
                        </MudStack>
                    </MudStack>
                </MudPaper>

                <!-- Social Media -->
                <MudPaper Class="glass-card pa-5">
                    <MudText Typo="Typo.h6" Class="mb-4 font-bold">
                        <MudIcon Icon="@Icons.Material.Filled.Share" Class="mr-2" />
                        Follow Us
                    </MudText>

                    <MudStack Row="true" Justify="Justify.SpaceAround">
                        <MudIconButton Icon="@Icons.Custom.Brands.Facebook" Color="Color.Primary" Size="Size.Large"
                            Class="hover-scale" />
                        <MudIconButton Icon="@Icons.Custom.Brands.Twitter" Color="Color.Info" Size="Size.Large"
                            Class="hover-scale" />
                        <MudIconButton Icon="@Icons.Custom.Brands.LinkedIn" Color="Color.Primary" Size="Size.Large"
                            Class="hover-scale" />
                        <MudIconButton Icon="@Icons.Custom.Brands.Instagram" Color="Color.Error" Size="Size.Large"
                            Class="hover-scale" />
                    </MudStack>
                </MudPaper>

                <!-- Quick Links -->
                <MudPaper Class="glass-card pa-5">
                    <MudText Typo="Typo.h6" Class="mb-3 font-bold">
                        <MudIcon Icon="@Icons.Material.Filled.Link" Class="mr-2" />
                        Quick Links
                    </MudText>

                    <MudStack Spacing="2">
                        <MudButton Variant="Variant.Text" Color="Color.Primary" FullWidth="true" Href="/help"
                            StartIcon="@Icons.Material.Filled.Help">
                            Help Center
                        </MudButton>
                        <MudButton Variant="Variant.Text" Color="Color.Primary" FullWidth="true" Href="/about"
                            StartIcon="@Icons.Material.Filled.Info">
                            About Us
                        </MudButton>
                        <MudButton Variant="Variant.Text" Color="Color.Primary" FullWidth="true"
                            StartIcon="@Icons.Material.Filled.Description">
                            Documentation
                        </MudButton>
                    </MudStack>
                </MudPaper>
            </MudStack>
        </MudItem>

        <!-- Map Section (Placeholder) -->
        <MudItem xs="12">
            <MudPaper Class="glass-card p-4 h-[400px]">
                @* <MudStack AlignItems="AlignItems.Center" Justify="Justify.Center" Class="h-100"> *@
                @*     <MudStack AlignItems="AlignItems.Center" Spacing="0"> *@
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d13356.789!2d20.0574!3d32.1191!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x13a89331d42f5b67%3A0x3a7c9e0e8f8a8a8a!2sUniversity%20of%20Benghazi!5e0!3m2!1sen!2sly!4v1234567890"
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            class="rounded-xl w-full h-full">
                        </iframe>
                @*     </MudStack> *@
                @* </MudStack> *@
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudStack>

@code {
    private ContactModel _contactModel = new();

    private void SubmitForm()
    {
        if (!_contactModel.AgreeToTerms)
        {
            Snackbar.Add("Please agree to the terms and conditions", Severity.Warning);
            return;
        }

        // Submit form to service
        Snackbar.Add("Thank you for your message! We'll get back to you soon.", Severity.Success);
        ResetForm();
    }

    private void ResetForm()
    {
        _contactModel = new ContactModel();
    }

    private class ContactModel
    {
        public string FirstName { get; set; } = string.Empty;
        public string LastName { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string? Phone { get; set; }
        public string Subject { get; set; } = "General Inquiry";
        public string Message { get; set; } = string.Empty;
        public bool AgreeToTerms { get; set; }
    }
}
